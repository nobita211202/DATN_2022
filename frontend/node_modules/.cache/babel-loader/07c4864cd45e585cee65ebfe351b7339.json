{"remainingRequest":"C:\\Users\\tho.lv\\Desktop\\Oauth0\\DATN_2022\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\tho.lv\\Desktop\\Oauth0\\DATN_2022\\frontend\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\tho.lv\\Desktop\\Oauth0\\DATN_2022\\frontend\\src\\state\\modules\\users.js","dependencies":[{"path":"C:\\Users\\tho.lv\\Desktop\\Oauth0\\DATN_2022\\frontend\\src\\state\\modules\\users.js","mtime":1670294674472},{"path":"C:\\Users\\tho.lv\\Desktop\\Oauth0\\DATN_2022\\frontend\\babel.config.js","mtime":1670294673677},{"path":"C:\\Users\\tho.lv\\Desktop\\Oauth0\\DATN_2022\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670294721262},{"path":"C:\\Users\\tho.lv\\Desktop\\Oauth0\\DATN_2022\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1670294723500},{"path":"C:\\Users\\tho.lv\\Desktop\\Oauth0\\DATN_2022\\frontend\\node_modules\\eslint-loader\\index.js","mtime":1670294721768}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kLmpzIjsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKZXhwb3J0IHZhciBzdGF0ZSA9IHsKICBjYWNoZWQ6IFtdCn07CmV4cG9ydCB2YXIgZ2V0dGVycyA9IHt9OwpleHBvcnQgdmFyIG11dGF0aW9ucyA9IHsKICBDQUNIRV9VU0VSOiBmdW5jdGlvbiBDQUNIRV9VU0VSKHN0YXRlLCBuZXdVc2VyKSB7CiAgICBzdGF0ZS5jYWNoZWQucHVzaChuZXdVc2VyKTsKICB9Cn07CmV4cG9ydCB2YXIgYWN0aW9ucyA9IHsKICBmZXRjaFVzZXI6IGZ1bmN0aW9uIGZldGNoVXNlcihfcmVmLCBfcmVmMikgewogICAgdmFyIGNvbW1pdCA9IF9yZWYuY29tbWl0LAogICAgICBzdGF0ZSA9IF9yZWYuc3RhdGUsCiAgICAgIHJvb3RTdGF0ZSA9IF9yZWYucm9vdFN0YXRlOwogICAgdmFyIHVzZXJuYW1lID0gX3JlZjIudXNlcm5hbWU7CiAgICAvLyAxLiBDaGVjayBpZiB3ZSBhbHJlYWR5IGhhdmUgdGhlIHVzZXIgYXMgYSBjdXJyZW50IHVzZXIuCiAgICB2YXIgY3VycmVudFVzZXIgPSByb290U3RhdGUuYXV0aC5jdXJyZW50VXNlcjsKICAgIGlmIChjdXJyZW50VXNlciAmJiBjdXJyZW50VXNlci51c2VybmFtZSA9PT0gdXNlcm5hbWUpIHsKICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShjdXJyZW50VXNlcik7CiAgICB9CgogICAgLy8gMi4gQ2hlY2sgaWYgd2UndmUgYWxyZWFkeSBmZXRjaGVkIGFuZCBjYWNoZWQgdGhlIHVzZXIuCiAgICB2YXIgbWF0Y2hlZFVzZXIgPSBzdGF0ZS5jYWNoZWQuZmluZChmdW5jdGlvbiAodXNlcikgewogICAgICByZXR1cm4gdXNlci51c2VybmFtZSA9PT0gdXNlcm5hbWU7CiAgICB9KTsKICAgIGlmIChtYXRjaGVkVXNlcikgewogICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG1hdGNoZWRVc2VyKTsKICAgIH0KCiAgICAvLyAzLiBGZXRjaCB0aGUgdXNlciBmcm9tIHRoZSBBUEkgYW5kIGNhY2hlIGl0IGluIGNhc2UKICAgIC8vICAgIHdlIG5lZWQgaXQgYWdhaW4gaW4gdGhlIGZ1dHVyZS4KICAgIHJldHVybiBheGlvcy5nZXQoIi9hcGkvdXNlcnMvIi5jb25jYXQodXNlcm5hbWUpKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICB2YXIgdXNlciA9IHJlc3BvbnNlLmRhdGE7CiAgICAgIGNvbW1pdCgnQ0FDSEVfVVNFUicsIHVzZXIpOwogICAgICByZXR1cm4gdXNlcjsKICAgIH0pOwogIH0KfTs="},{"version":3,"names":["axios","state","cached","getters","mutations","CACHE_USER","newUser","push","actions","fetchUser","commit","rootState","username","currentUser","auth","Promise","resolve","matchedUser","find","user","get","then","response","data"],"sources":["C:/Users/tho.lv/Desktop/Oauth0/DATN_2022/frontend/src/state/modules/users.js"],"sourcesContent":["import axios from 'axios'\r\n\r\nexport const state = {\r\n  cached: [],\r\n}\r\n\r\nexport const getters = {}\r\n\r\nexport const mutations = {\r\n  CACHE_USER(state, newUser) {\r\n    state.cached.push(newUser)\r\n  },\r\n}\r\n\r\nexport const actions = {\r\n  fetchUser({ commit, state, rootState }, { username }) {\r\n    // 1. Check if we already have the user as a current user.\r\n    const { currentUser } = rootState.auth\r\n    if (currentUser && currentUser.username === username) {\r\n      return Promise.resolve(currentUser)\r\n    }\r\n\r\n    // 2. Check if we've already fetched and cached the user.\r\n    const matchedUser = state.cached.find((user) => user.username === username)\r\n    if (matchedUser) {\r\n      return Promise.resolve(matchedUser)\r\n    }\r\n\r\n    // 3. Fetch the user from the API and cache it in case\r\n    //    we need it again in the future.\r\n    return axios.get(`/api/users/${username}`).then((response) => {\r\n      const user = response.data\r\n      commit('CACHE_USER', user)\r\n      return user\r\n    })\r\n  },\r\n}\r\n"],"mappings":";;;AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,OAAO,IAAMC,KAAK,GAAG;EACnBC,MAAM,EAAE;AACV,CAAC;AAED,OAAO,IAAMC,OAAO,GAAG,CAAC,CAAC;AAEzB,OAAO,IAAMC,SAAS,GAAG;EACvBC,UAAU,sBAACJ,KAAK,EAAEK,OAAO,EAAE;IACzBL,KAAK,CAACC,MAAM,CAACK,IAAI,CAACD,OAAO,CAAC;EAC5B;AACF,CAAC;AAED,OAAO,IAAME,OAAO,GAAG;EACrBC,SAAS,kCAA6C;IAAA,IAA1CC,MAAM,QAANA,MAAM;MAAET,KAAK,QAALA,KAAK;MAAEU,SAAS,QAATA,SAAS;IAAA,IAAMC,QAAQ,SAARA,QAAQ;IAChD;IACA,IAAQC,WAAW,GAAKF,SAAS,CAACG,IAAI,CAA9BD,WAAW;IACnB,IAAIA,WAAW,IAAIA,WAAW,CAACD,QAAQ,KAAKA,QAAQ,EAAE;MACpD,OAAOG,OAAO,CAACC,OAAO,CAACH,WAAW,CAAC;IACrC;;IAEA;IACA,IAAMI,WAAW,GAAGhB,KAAK,CAACC,MAAM,CAACgB,IAAI,CAAC,UAACC,IAAI;MAAA,OAAKA,IAAI,CAACP,QAAQ,KAAKA,QAAQ;IAAA,EAAC;IAC3E,IAAIK,WAAW,EAAE;MACf,OAAOF,OAAO,CAACC,OAAO,CAACC,WAAW,CAAC;IACrC;;IAEA;IACA;IACA,OAAOjB,KAAK,CAACoB,GAAG,sBAAeR,QAAQ,EAAG,CAACS,IAAI,CAAC,UAACC,QAAQ,EAAK;MAC5D,IAAMH,IAAI,GAAGG,QAAQ,CAACC,IAAI;MAC1Bb,MAAM,CAAC,YAAY,EAAES,IAAI,CAAC;MAC1B,OAAOA,IAAI;IACb,CAAC,CAAC;EACJ;AACF,CAAC"}]}
{"remainingRequest":"C:\\Users\\tho.lv\\Desktop\\Oauth0\\DATN_2022\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\tho.lv\\Desktop\\Oauth0\\DATN_2022\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\tho.lv\\Desktop\\Oauth0\\DATN_2022\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\tho.lv\\Desktop\\Oauth0\\DATN_2022\\frontend\\src\\router\\views\\admin\\admin-cateogry.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\tho.lv\\Desktop\\Oauth0\\DATN_2022\\frontend\\src\\router\\views\\admin\\admin-cateogry.vue","mtime":1670294674469},{"path":"C:\\Users\\tho.lv\\Desktop\\Oauth0\\DATN_2022\\frontend\\babel.config.js","mtime":1670294673677},{"path":"C:\\Users\\tho.lv\\Desktop\\Oauth0\\DATN_2022\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670294721262},{"path":"C:\\Users\\tho.lv\\Desktop\\Oauth0\\DATN_2022\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1670294723500},{"path":"C:\\Users\\tho.lv\\Desktop\\Oauth0\\DATN_2022\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1670294721262},{"path":"C:\\Users\\tho.lv\\Desktop\\Oauth0\\DATN_2022\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1670294724256}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIkM6L1VzZXJzL3Roby5sdi9EZXNrdG9wL09hdXRoMC9EQVROXzIwMjIvZnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5wdXNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjYXRlZ29yaWVzOiB7CiAgICAgICAgaXNCdXN5OiBmYWxzZSwKICAgICAgICBkYXRhOiBbewogICAgICAgICAgaWQ6IDEsCiAgICAgICAgICBuYW1lXzogJ0RhbmggbeG7pWMgdGVzdCcsCiAgICAgICAgICBwYXJlbnRfaWQ6IG51bGwsCiAgICAgICAgICBhZG1pbl9pZDogMSwKICAgICAgICAgIGxpa2U6IDAsCiAgICAgICAgICBpbWFnZTogJy9hc3NldHMvaW1hZ2VzL2JyYW5kL2xvZ28tMy5wbmcnLAogICAgICAgICAgY3JlYXRlZDogJzE5NzAtMDEtMDEnLAogICAgICAgICAgc3RhdHVzOiAxCiAgICAgICAgfV0sCiAgICAgICAgZmllbGRzOiBbewogICAgICAgICAga2V5OiAnaWQnLAogICAgICAgICAgbGFiZWw6ICdJRCcsCiAgICAgICAgICBzb3J0YWJsZTogdHJ1ZQogICAgICAgIH0sIHsKICAgICAgICAgIGtleTogJ25hbWVfJywKICAgICAgICAgIGxhYmVsOiAnVMOqbiBkYW5oIG3hu6VjJywKICAgICAgICAgIHNvcnRhYmxlOiB0cnVlCiAgICAgICAgfSwgewogICAgICAgICAga2V5OiAncGFyZW50X2lkJywKICAgICAgICAgIGxhYmVsOiAnRGFuaCBt4bulYyBjaGEnLAogICAgICAgICAgc29ydGFibGU6IHRydWUKICAgICAgICB9LCB7CiAgICAgICAgICBrZXk6ICdhZG1pbl9pZCcsCiAgICAgICAgICBsYWJlbDogJ05nxrDhu51pIHF14bqjbiBsw70nLAogICAgICAgICAgc29ydGFibGU6IHRydWUKICAgICAgICB9LCB7CiAgICAgICAgICBrZXk6ICdsaWtlJywKICAgICAgICAgIGxhYmVsOiAnU+G7kSBsaWtlJywKICAgICAgICAgIHNvcnRhYmxlOiB0cnVlCiAgICAgICAgfSwgewogICAgICAgICAga2V5OiAnaW1hZ2UnLAogICAgICAgICAgbGFiZWw6ICdIw6xuaCDhuqNuaCcsCiAgICAgICAgICBzb3J0YWJsZTogdHJ1ZQogICAgICAgIH0sIHsKICAgICAgICAgIGtleTogJ2NyZWF0ZWQnLAogICAgICAgICAgbGFiZWw6ICdOZ8OgeSB04bqhbycKICAgICAgICB9LCB7CiAgICAgICAgICBrZXk6ICdzdGF0dXMnLAogICAgICAgICAgbGFiZWw6ICdUcuG6oW5nIHRow6FpJywKICAgICAgICAgIHNvcnRhYmxlOiB0cnVlCiAgICAgICAgfSwgewogICAgICAgICAga2V5OiAnYWN0aW9uJywKICAgICAgICAgIGxhYmVsOiAnSMOgbmggxJHhu5luZycKICAgICAgICB9XSwKICAgICAgICBtZXRhOiB7CiAgICAgICAgICBwYWdpbmF0aW9uOiB7CiAgICAgICAgICAgIHRvdGFsOiAxLAogICAgICAgICAgICBjb3VudDogMQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwKICAgICAgYnVzeTogZmFsc2UsCiAgICAgIGZvcm1BZGRDYXRlZ29yeTogewogICAgICAgIGFkbWluX2lkOiAxLAogICAgICAgIHN0YXR1czogMAogICAgICAgIC8vIHBhcmVudF9pZDogbnVsbCwKICAgICAgfSwKCiAgICAgIGZvcm1FZGl0Q2F0ZWdvcnk6IHt9LAogICAgICBjYXRlZ29yeURlbGV0ZToge30sCiAgICAgIGN1cnJlbnRQYWdlOiAxLAogICAgICBjYXRlZ29yaWVzUGVyUGFnZTogNSwKICAgICAgY3VycmVudFVzZXI6IHsKICAgICAgICBpZDogMSwKICAgICAgICBuYW1lOiAnYWRtaW4nCiAgICAgIH0sCiAgICAgIG9wdGlvbnNTdGF0dXM6IFt7CiAgICAgICAgdmFsdWU6IDAsCiAgICAgICAgdGV4dDogJ0luYWN0aXZlJwogICAgICB9LCB7CiAgICAgICAgdmFsdWU6IDEsCiAgICAgICAgdGV4dDogJ0FjdGl2ZScKICAgICAgfV0sCiAgICAgIG9wdGlvbnNBZG1pbklkOiBbewogICAgICAgIHZhbHVlOiAxLAogICAgICAgIHRleHQ6ICdBZG1pbicKICAgICAgfSwgewogICAgICAgIHZhbHVlOiAyLAogICAgICAgIHRleHQ6ICdNYW5hZ2VyJwogICAgICB9XSwKICAgICAgY2F0ZWdvcmllc0JhY2t1cDogW10sCiAgICAgIHR4dFNlYXJjaDogJycKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgbGlzdENhdGVnb3JpZXM6IGZ1bmN0aW9uIGxpc3RDYXRlZ29yaWVzKCkgewogICAgICB2YXIgYXJyID0gW107CiAgICAgIGFyci5wdXNoKHsKICAgICAgICB2YWx1ZTogbnVsbCwKICAgICAgICB0ZXh0OiAnJwogICAgICB9KTsKICAgICAgdGhpcy5jYXRlZ29yaWVzLmRhdGEuZm9yRWFjaChmdW5jdGlvbiAoZSkgewogICAgICAgIGFyci5wdXNoKHsKICAgICAgICAgIHZhbHVlOiBlLmlkLAogICAgICAgICAgdGV4dDogZS5uYW1lXwogICAgICAgIH0pOwogICAgICB9KTsKICAgICAgcmV0dXJuIGFycjsKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICB0eHRTZWFyY2g6IGZ1bmN0aW9uIHR4dFNlYXJjaCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgaWYgKHRoaXMudHh0U2VhcmNoICE9PSAnJyAmJiB0aGlzLnR4dFNlYXJjaCAhPT0gbnVsbCkgewogICAgICAgIHRoaXMuY2F0ZWdvcmllcy5kYXRhID0gdGhpcy5jYXRlZ29yaWVzQmFja3VwLmZpbHRlcihmdW5jdGlvbiAoZSkgewogICAgICAgICAgcmV0dXJuIGUubmFtZV8udG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhfdGhpcy50eHRTZWFyY2gudG9Mb3dlckNhc2UoKSk7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5jYXRlZ29yaWVzLmRhdGEgPSB0aGlzLmNhdGVnb3JpZXNCYWNrdXA7CiAgICAgIH0KICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmNhdGVnb3JpZXNCYWNrdXAgPSB0aGlzLmNhdGVnb3JpZXMuZGF0YTsKICB9LAogIG1ldGhvZHM6IHsKICAgIG5hbWVPZlBhcmVudENhdGVnb3J5OiBmdW5jdGlvbiBuYW1lT2ZQYXJlbnRDYXRlZ29yeShpbmRleCkgewogICAgICB2YXIgaXNFeGlzdCA9IHRoaXMuY2F0ZWdvcmllcy5kYXRhLmZpbmQoZnVuY3Rpb24gKGUpIHsKICAgICAgICByZXR1cm4gZS5pZCA9PT0gaW5kZXg7CiAgICAgIH0pOwogICAgICBpZiAoaXNFeGlzdCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgcmV0dXJuIGlzRXhpc3QubmFtZV87CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuICcnOwogICAgICB9CiAgICB9LAogICAgdHJ5RWRpdENhdGVnb3J5OiBmdW5jdGlvbiB0cnlFZGl0Q2F0ZWdvcnkoKSB7CiAgICAgIHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcih0aGlzLmNhdGVnb3JpZXMuZGF0YSksCiAgICAgICAgX3N0ZXA7CiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciBvYmogPSBfc3RlcC52YWx1ZTsKICAgICAgICAgIGlmIChvYmouaWQgPT09IHRoaXMuZm9ybUVkaXRDYXRlZ29yeS5pZCkgewogICAgICAgICAgICBvYmoubmFtZV8gPSB0aGlzLmZvcm1FZGl0Q2F0ZWdvcnkubmFtZV87CiAgICAgICAgICAgIG9iai5pbWFnZSA9IHRoaXMuZm9ybUVkaXRDYXRlZ29yeS5pbWFnZTsKICAgICAgICAgICAgb2JqLnBhcmVudF9pZCA9IHRoaXMuZm9ybUVkaXRDYXRlZ29yeS5wYXJlbnRfaWQ7CiAgICAgICAgICAgIG9iai5hZG1pbl9pZCA9IHRoaXMuZm9ybUVkaXRDYXRlZ29yeS5hZG1pbl9pZDsKICAgICAgICAgICAgb2JqLnN0YXR1cyA9IHRoaXMuZm9ybUVkaXRDYXRlZ29yeS5zdGF0dXM7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2l0ZXJhdG9yLmUoZXJyKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBfaXRlcmF0b3IuZigpOwogICAgICB9CiAgICAgIHRoaXMuY2F0ZWdvcmllc0JhY2t1cCA9IHRoaXMuY2F0ZWdvcmllcy5kYXRhOwogICAgICB0aGlzLiRidk1vZGFsLmhpZGUoJ21vZGFsLWVkaXQtY2F0ZWdvcnknKTsKICAgIH0sCiAgICB0cnlBZGRDYXRlZ29yeTogZnVuY3Rpb24gdHJ5QWRkQ2F0ZWdvcnkoKSB7CiAgICAgIHZhciBvYmogPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmZvcm1BZGRDYXRlZ29yeSk7CiAgICAgIHZhciBpc0V4aXN0ID0gdGhpcy5jYXRlZ29yaWVzLmRhdGEuZmluZChmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiBlLm5hbWVfID09PSBvYmoubmFtZV87CiAgICAgIH0pOwogICAgICBpZiAoaXNFeGlzdCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgYWxlcnQoJ1TDqm4gZGFuaCBt4bulYyDEkcOjIHThu5NuIHThuqFpJyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIGlkID0gdGhpcy5jYXRlZ29yaWVzLmRhdGEubGVuZ3RoICsgMTsKICAgICAgICBvYmouaWQgPSBpZDsKICAgICAgICBvYmoubGlrZSA9IDA7CiAgICAgICAgb2JqLmNyZWF0ZWQgPSAnMTk3MC0wMS0wMSc7CiAgICAgICAgb2JqLmNyZWF0b3IgPSB0aGlzLmN1cnJlbnRVc2VyLm5hbWU7CiAgICAgICAgdGhpcy5jYXRlZ29yaWVzLmRhdGEucHVzaChvYmopOwogICAgICB9CiAgICAgIHRoaXMuY2F0ZWdvcmllc0JhY2t1cCA9IHRoaXMuY2F0ZWdvcmllcy5kYXRhOwogICAgICB0aGlzLiRidk1vZGFsLmhpZGUoJ21vZGFsLWFkZC1jYXRlZ29yeScpOwogICAgfSwKICAgIHRyeVJlbW92ZUNhdGVnb3J5OiBmdW5jdGlvbiB0cnlSZW1vdmVDYXRlZ29yeSgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CiAgICAgIHRoaXMuY2F0ZWdvcmllcy5kYXRhID0gdGhpcy5jYXRlZ29yaWVzLmRhdGEuZmlsdGVyKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcmV0dXJuIGUuaWQgIT09IF90aGlzMi5jYXRlZ29yeURlbGV0ZS5pZDsKICAgICAgfSk7CiAgICAgIHRoaXMuYnVzeSA9IGZhbHNlOwogICAgICB0aGlzLmNhdGVnb3J5RGVsZXRlID0ge307CiAgICAgIHRoaXMuY2F0ZWdvcmllc0JhY2t1cCA9IHRoaXMuY2F0ZWdvcmllcy5kYXRhOwogICAgfSwKICAgIG9uUmVtb3ZlQ2F0ZWdvcnk6IGZ1bmN0aW9uIG9uUmVtb3ZlQ2F0ZWdvcnkoaXRlbSkgewogICAgICB0aGlzLmNhdGVnb3J5RGVsZXRlID0gaXRlbTsKICAgICAgdGhpcy5idXN5ID0gdHJ1ZTsKICAgIH0sCiAgICBvbkNhbmNlbDogZnVuY3Rpb24gb25DYW5jZWwoKSB7CiAgICAgIHRoaXMuYnVzeSA9IGZhbHNlOwogICAgICB0aGlzLmNhdGVnb3J5RGVsZXRlID0ge307CiAgICB9LAogICAgbWRFZGl0Q2F0ZWdvcnk6IGZ1bmN0aW9uIG1kRWRpdENhdGVnb3J5KGl0ZW0pIHsKICAgICAgdGhpcy5mb3JtRWRpdENhdGVnb3J5ID0gT2JqZWN0LmFzc2lnbih7fSwgaXRlbSk7CiAgICAgIHRoaXMuJGJ2TW9kYWwuc2hvdygnbW9kYWwtZWRpdC1jYXRlZ29yeScpOwogICAgfQogIH0KfTs="},{"version":3,"mappings":";;;;;;;;;AACA;EACAA;IACA;MACAC;QACAC;QACAF,OACA;UACAG;UACAC;UACAC;UACAC;UACAC;UACAC;UACAC;UACAC;QACA,EACA;QACAC,SACA;UAAAC;UAAAC;UAAAC;QAAA,GACA;UAAAF;UAAAC;UAAAC;QAAA,GACA;UAAAF;UAAAC;UAAAC;QAAA,GACA;UAAAF;UAAAC;UAAAC;QAAA,GACA;UAAAF;UAAAC;UAAAC;QAAA,GACA;UAAAF;UAAAC;UAAAC;QAAA,GACA;UAAAF;UAAAC;QAAA,GACA;UAAAD;UAAAC;UAAAC;QAAA,GACA;UAAAF;UAAAC;QAAA,EACA;QACAE;UACAC;YACAC;YACAC;UACA;QACA;MACA;MACAC;MACAC;QACAd;QACAI;QACA;MACA;;MACAW;MACAC;MACAC;MACAC;MACAC;QACAtB;QACAuB;MACA;MACAC,gBACA;QAAAC;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,EACA;MACAC,iBACA;QAAAF;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,EACA;MACAE;MACAC;IACA;EACA;EACAC;IACAC;MACA;MACAC;QAAAP;QAAAC;MAAA;MACA;QACAM;UAAAP;UAAAC;QAAA;MACA;MACA;IACA;EACA;EACAO;IACAJ;MAAA;MACA;QACA;UAAA,OACAK;QAAA,EACA;MACA;QACA;MACA;IACA;EACA;EAEA5B;IACA;EACA;EAEA6B;IACAC;MACA;QAAA;MAAA;MACA;QACA;MACA;QACA;MACA;IACA;IACAC;MAAA,2CACA;QAAA;MAAA;QAAA;UAAA;UACA;YACAC;YACAA;YACAA;YACAA;YACAA;YACA;UACA;QACA;MAAA;QAAA;MAAA;QAAA;MAAA;MACA;MACA;IACA;IAEAC;MACA;MACA;QAAA;MAAA;MACA;QACAC;MACA;QACA;QACAF;QACAA;QACAA;QACAA;QACA;MACA;MACA;MACA;IACA;IACAG;MAAA;MACA,mDACA;QAAA;MAAA,EACA;MACA;MACA;MACA;IACA;IACAC;MACA;MACA;IACA;IACAC;MACA;MACA;IACA;IACAC;MACA;MACA;IACA;EACA;AACA","names":["data","categories","isBusy","id","name_","parent_id","admin_id","like","image","created","status","fields","key","label","sortable","meta","pagination","total","count","busy","formAddCategory","formEditCategory","categoryDelete","currentPage","categoriesPerPage","currentUser","name","optionsStatus","value","text","optionsAdminId","categoriesBackup","txtSearch","computed","listCategories","arr","watch","e","methods","nameOfParentCategory","tryEditCategory","obj","tryAddCategory","alert","tryRemoveCategory","onRemoveCategory","onCancel","mdEditCategory"],"sourceRoot":"src/router/views/admin","sources":["admin-cateogry.vue"],"sourcesContent":["<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      categories: {\r\n        isBusy: false,\r\n        data: [\r\n          {\r\n            id: 1,\r\n            name_: 'Danh mục test',\r\n            parent_id: null,\r\n            admin_id: 1,\r\n            like: 0,\r\n            image: '/assets/images/brand/logo-3.png',\r\n            created: '1970-01-01',\r\n            status: 1,\r\n          },\r\n        ],\r\n        fields: [\r\n          { key: 'id', label: 'ID', sortable: true },\r\n          { key: 'name_', label: 'Tên danh mục', sortable: true },\r\n          { key: 'parent_id', label: 'Danh mục cha', sortable: true },\r\n          { key: 'admin_id', label: 'Người quản lý', sortable: true },\r\n          { key: 'like', label: 'Số like', sortable: true },\r\n          { key: 'image', label: 'Hình ảnh', sortable: true },\r\n          { key: 'created', label: 'Ngày tạo' },\r\n          { key: 'status', label: 'Trạng thái', sortable: true },\r\n          { key: 'action', label: 'Hành động' },\r\n        ],\r\n        meta: {\r\n          pagination: {\r\n            total: 1,\r\n            count: 1,\r\n          },\r\n        },\r\n      },\r\n      busy: false,\r\n      formAddCategory: {\r\n        admin_id: 1,\r\n        status: 0,\r\n        // parent_id: null,\r\n      },\r\n      formEditCategory: {},\r\n      categoryDelete: {},\r\n      currentPage: 1,\r\n      categoriesPerPage: 5,\r\n      currentUser: {\r\n        id: 1,\r\n        name: 'admin',\r\n      },\r\n      optionsStatus: [\r\n        { value: 0, text: 'Inactive' },\r\n        { value: 1, text: 'Active' },\r\n      ],\r\n      optionsAdminId: [\r\n        { value: 1, text: 'Admin' },\r\n        { value: 2, text: 'Manager' },\r\n      ],\r\n      categoriesBackup: [],\r\n      txtSearch: '',\r\n    }\r\n  },\r\n  computed: {\r\n    listCategories() {\r\n      const arr = []\r\n      arr.push({ value: null, text: '' })\r\n      this.categories.data.forEach((e) => {\r\n        arr.push({ value: e.id, text: e.name_ })\r\n      })\r\n      return arr\r\n    },\r\n  },\r\n  watch: {\r\n    txtSearch() {\r\n      if (this.txtSearch !== '' && this.txtSearch !== null) {\r\n        this.categories.data = this.categoriesBackup.filter((e) =>\r\n          e.name_.toLowerCase().includes(this.txtSearch.toLowerCase())\r\n        )\r\n      } else {\r\n        this.categories.data = this.categoriesBackup\r\n      }\r\n    },\r\n  },\r\n\r\n  created() {\r\n    this.categoriesBackup = this.categories.data\r\n  },\r\n\r\n  methods: {\r\n    nameOfParentCategory(index) {\r\n      const isExist = this.categories.data.find((e) => e.id === index)\r\n      if (isExist !== undefined) {\r\n        return isExist.name_\r\n      } else {\r\n        return ''\r\n      }\r\n    },\r\n    tryEditCategory() {\r\n      for (const obj of this.categories.data) {\r\n        if (obj.id === this.formEditCategory.id) {\r\n          obj.name_ = this.formEditCategory.name_\r\n          obj.image = this.formEditCategory.image\r\n          obj.parent_id = this.formEditCategory.parent_id\r\n          obj.admin_id = this.formEditCategory.admin_id\r\n          obj.status = this.formEditCategory.status\r\n          break\r\n        }\r\n      }\r\n      this.categoriesBackup = this.categories.data\r\n      this.$bvModal.hide('modal-edit-category')\r\n    },\r\n\r\n    tryAddCategory() {\r\n      const obj = Object.assign({}, this.formAddCategory)\r\n      const isExist = this.categories.data.find((e) => e.name_ === obj.name_)\r\n      if (isExist !== undefined) {\r\n        alert('Tên danh mục đã tồn tại')\r\n      } else {\r\n        const id = this.categories.data.length + 1\r\n        obj.id = id\r\n        obj.like = 0\r\n        obj.created = '1970-01-01'\r\n        obj.creator = this.currentUser.name\r\n        this.categories.data.push(obj)\r\n      }\r\n      this.categoriesBackup = this.categories.data\r\n      this.$bvModal.hide('modal-add-category')\r\n    },\r\n    tryRemoveCategory() {\r\n      this.categories.data = this.categories.data.filter(\r\n        (e) => e.id !== this.categoryDelete.id\r\n      )\r\n      this.busy = false\r\n      this.categoryDelete = {}\r\n      this.categoriesBackup = this.categories.data\r\n    },\r\n    onRemoveCategory(item) {\r\n      this.categoryDelete = item\r\n      this.busy = true\r\n    },\r\n    onCancel() {\r\n      this.busy = false\r\n      this.categoryDelete = {}\r\n    },\r\n    mdEditCategory(item) {\r\n      this.formEditCategory = Object.assign({}, item)\r\n      this.$bvModal.show('modal-edit-category')\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<template>\r\n  <div>\r\n    <b-row class=\"mb-10\">\r\n      <b-col>\r\n        <b-form-input\r\n          v-model=\"txtSearch\"\r\n          placeholder=\"Tìm kiếm danh mục\"\r\n        ></b-form-input>\r\n      </b-col>\r\n      <b-col>\r\n        <button\r\n          class=\"btn btn-success mb-2 float-right\"\r\n          @click=\"$bvModal.show('modal-add-category')\"\r\n          ><b-icon icon=\"patch-plus\" aria-hidden=\"true\"></b-icon> Thêm danh\r\n          mục</button\r\n        >\r\n      </b-col>\r\n    </b-row>\r\n    <b-table\r\n      striped\r\n      hover\r\n      responsive\r\n      :items=\"categories.data\"\r\n      :fields=\"categories.fields\"\r\n      :busy=\"categories.isBusy\"\r\n    >\r\n      <template v-slot:table-busy>\r\n        <div class=\"text-center text-secondary my-2\">\r\n          <b-spinner class=\"align-middle me-2\"></b-spinner>\r\n          <strong>Loading...</strong>\r\n        </div>\r\n      </template>\r\n      <template v-slot:cell(parent_id)=\"cate\">\r\n        <span> {{ nameOfParentCategory(cate.value) }} </span>\r\n      </template>\r\n      <template v-slot:cell(status)=\"cate\">\r\n        <span v-if=\"cate.item.status === 0\" class=\"text-danger text-bold\">\r\n          Inactive\r\n        </span>\r\n        <span v-if=\"cate.item.status === 1\" class=\"text-success text-bold\">\r\n          Active\r\n        </span>\r\n      </template>\r\n      <template v-slot:cell(admin_id)=\"cate\">\r\n        <span v-if=\"cate.item.admin_id === 1\" class=\"text-bold\"> Admin </span>\r\n        <span v-if=\"cate.item.admin_id === 2\" class=\"text-bold\"> Manager </span>\r\n      </template>\r\n      <template v-slot:cell(action)=\"cate\">\r\n        <b-button\r\n          class=\"mr-5\"\r\n          variant=\"outline-danger\"\r\n          @click=\"onRemoveCategory(cate.item)\"\r\n          ><b-icon icon=\"trash-fill\" aria-hidden=\"true\"></b-icon> Xoá</b-button\r\n        >\r\n        <b-button variant=\"outline-info\" @click=\"mdEditCategory(cate.item)\"\r\n          ><b-icon icon=\"pen\" aria-hidden=\"true\"></b-icon> Sửa</b-button\r\n        >\r\n      </template>\r\n    </b-table>\r\n    <b-modal\r\n      id=\"modal-add-category\"\r\n      size=\"lg\"\r\n      centered\r\n      scrollable\r\n      hide-header-close\r\n      hide-backdrop\r\n    >\r\n      <template v-slot:modal-title>Thêm danh mục</template>\r\n      <b-form>\r\n        <b-form-group label=\"Tên danh mục\">\r\n          <b-form-input\r\n            v-model=\"formAddCategory.name_\"\r\n            required\r\n            type=\"text\"\r\n          ></b-form-input>\r\n        </b-form-group>\r\n        <b-form-group label=\"Hình ảnh\">\r\n          <b-form-input\r\n            v-model=\"formAddCategory.image\"\r\n            required\r\n            type=\"text\"\r\n          ></b-form-input>\r\n        </b-form-group>\r\n        <b-row>\r\n          <b-col>\r\n            <b-form-group label=\"Danh mục cha\">\r\n              <b-form-select\r\n                v-model=\"formAddCategory.parent_id\"\r\n                :options=\"listCategories\"\r\n              ></b-form-select>\r\n            </b-form-group>\r\n          </b-col>\r\n          <b-col>\r\n            <b-form-group label=\"Người quản lý\">\r\n              <b-form-select\r\n                v-model=\"formAddCategory.admin_id\"\r\n                :options=\"optionsAdminId\"\r\n              ></b-form-select>\r\n            </b-form-group>\r\n          </b-col>\r\n          <b-col>\r\n            <b-form-group label=\"Trạng thái\">\r\n              <b-form-select\r\n                v-model=\"formAddCategory.status\"\r\n                :options=\"optionsStatus\"\r\n              ></b-form-select>\r\n            </b-form-group>\r\n          </b-col>\r\n        </b-row>\r\n      </b-form>\r\n      <template v-slot:modal-footer>\r\n        <b-button type=\"button\" variant=\"success\" @click=\"tryAddCategory\">\r\n          Thêm</b-button\r\n        >\r\n      </template>\r\n    </b-modal>\r\n\r\n    <b-modal\r\n      id=\"modal-edit-category\"\r\n      size=\"lg\"\r\n      centered\r\n      scrollable\r\n      hide-header-close\r\n      hide-backdrop\r\n    >\r\n      <template v-slot:modal-title> Sửa danh mục </template>\r\n      <b-form>\r\n        <b-form-group label=\"Tên danh mục\">\r\n          <b-form-input\r\n            v-model=\"formEditCategory.name_\"\r\n            required\r\n            type=\"text\"\r\n          ></b-form-input>\r\n        </b-form-group>\r\n        <b-form-group label=\"Hình ảnh\">\r\n          <b-form-input\r\n            v-model=\"formEditCategory.image\"\r\n            required\r\n            type=\"text\"\r\n          ></b-form-input>\r\n        </b-form-group>\r\n        <b-row>\r\n          <b-col>\r\n            <b-form-group label=\"Danh mục cha\">\r\n              <b-form-select\r\n                v-model=\"formEditCategory.parent_id\"\r\n                :options=\"listCategories\"\r\n              ></b-form-select>\r\n            </b-form-group>\r\n          </b-col>\r\n          <b-col>\r\n            <b-form-group label=\"Người quản lý\">\r\n              <b-form-select\r\n                v-model=\"formEditCategory.admin_id\"\r\n                :options=\"optionsAdminId\"\r\n              ></b-form-select>\r\n            </b-form-group>\r\n          </b-col>\r\n          <b-col>\r\n            <b-form-group label=\"Trạng thái\">\r\n              <b-form-select\r\n                v-model=\"formEditCategory.status\"\r\n                :options=\"optionsStatus\"\r\n              ></b-form-select>\r\n            </b-form-group>\r\n          </b-col>\r\n        </b-row>\r\n      </b-form>\r\n      <template v-slot:modal-footer>\r\n        <b-button type=\"button\" variant=\"success\" @click=\"tryEditCategory\">\r\n          Sửa</b-button\r\n        >\r\n      </template>\r\n    </b-modal>\r\n\r\n    <b-overlay :show=\"busy\" no-wrap>\r\n      <template v-slot:overlay>\r\n        <div\r\n          ref=\"dialog\"\r\n          tabindex=\"-1\"\r\n          role=\"dialog\"\r\n          aria-modal=\"false\"\r\n          class=\"text-center p3\"\r\n        >\r\n          <p>\r\n            <strong id=\"form-confirm-label\">\r\n              Bạn có chắc muốn <span class=\"text-danger\">xoá</span\r\n              ><span class=\"text-bold\"> {{ categoryDelete.name_ }}</span>\r\n            </strong>\r\n          </p>\r\n          <div style=\"justify-content: center\">\r\n            <b-button variant=\"outline-default\" class=\"mr-3\" @click=\"onCancel\"\r\n              >Huỷ</b-button\r\n            >\r\n            <b-button\r\n              variant=\"outline-danger\"\r\n              class=\"mr-3\"\r\n              @click=\"tryRemoveCategory\"\r\n              >Xoá</b-button\r\n            >\r\n          </div>\r\n        </div>\r\n      </template>\r\n    </b-overlay>\r\n  </div>\r\n</template>\r\n"]}]}